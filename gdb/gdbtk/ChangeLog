2003-02-20  Pierre Muller  <muller@ics.u-strasbg.fr>

	* generic/gdbtk-cmds.c: Add missing "block.h" include.
	generic/gdbtk-stack.c: Ditto.
	generic/gdbtk-wrapper.c: Ditto.

2003-02-18  Keith Seitz  <keiths@redhat.com>

	* generic/gdbtk-main.c (main): Change name of intepreter to "insight".
	* generic/gdbtk.h: Add ifdef wrappers.
	(gdbtk_init): Declare.
	(gdbtk_source_start_file): Declare.
	* generic/gdbtk.c (gdbtk_init): Export.
	Reomve init_ui_hook stuff.
	Do not add hooks here anymore (moved into interps).
	Do not muck with gdbk_stdout et al (moved into interps).
	(gdbtk_source_start_file): Code ripped out of gdbtk_init
	which deals with sourcing the main startup file.
	(gdbtk_init_1): Hack: New function.
	(argv0): Hack: New static global.
	(tk_init): Moved to gdbtk-interps.c.
	(gdbtk_resume): Likewise.
	(gdbtk_suspend): Likewise.
	(gdbtk_prompt_p): Likewise.
	(gdbtk_exec): Likewise.
	(gdbtk_command_loop): Likewise.
	(_initialize_gdbtk): Move interpreter stuff to gdbtk-interps.c.
	Hack: Add new init_ui_hook.
	* generic/gdbtk-interps.c: New file.

2003-02-17  Christopher Faylor  <cgf@redhat.com>

	Revert below change.

2003-02-17  Christopher Faylor  <cgf@redhat.com>

	* gdbtk/gdbtk.c (tk_procs): Make file global.  Declare at top.
	(_initialize_gdbtk): Move interp_add from here.
	(gdb_tk): Call interp_add here.  Pass correct uiout to interp_new.

2003-02-14  Keith Seitz  <keiths@redhat.com>

	From Chris Faylor <cgf@redhat.com>:
	* generic/gdbtk-main.c (main): Initialize args.interpreter_p.

2003-02-14  Martin M. Hunt  <hunt@redhat.com>

	* library/globalpref.itb (GlobalPref::_change_icons): Fix
	curselection call for combobox.

2003-02-12  Andrew Cagney  <ac131313@redhat.com>

	* generic/gdbtk-hooks.c (tk_command_loop): Move function ...
	* generic/gdbtk.c (gdbtk_command_loop): ... to here.  Add data
	parameter.

	* generic/gdbtk.c: Include "interps.h".
	(_initialize_gdbtk): Register the "gdbtk" interpreter.  Don't set
	init_ui_hook.
	(gdbtk_init): Change parameter to a void data pointer.
	(tk_init, gdbtk_resume, gdbtk_suspend): New functions.
	(gdbtk_prompt_p, gdbtk_exec): New functions.

	* generic/gdbtk-hooks.c (gdbtk_add_hooks): Don't set
	command_loop_hook.  Update copyright.
	
2003-02-11  Martin M. Hunt  <hunt@redhat.com>

	* library/help/images/browser1.png: New file.
	* library/help/images/browser2.png: New file.	

2003-02-11  Keith R Seitz  <keiths@redhat.com>

	* generic/gdbtk-register.c (register_changed_p): If the selected
	frame is NULL, do not call frame_register_read, since that will
	now cause an internal error.

2003-02-10  Andrew Cagney  <ac131313@redhat.com>

	* generic/gdbtk-varobj.c (gdb_variable_command): Ditto for
	`commands'.
	(variable_type): Ditto for `first'.
	(variable_obj_command): Ditto.
	(variable_create): Ditto for create_options.
	(variable_type): Ditto for `last'.  Use `string' and not `first'
	when modifying the buffer.
	(struct disassembly_client_data ): Ditto for `asm_argv'
	* generic/gdbtk-register.c (gdb_register_info): Ditto for
	`commands'.
	* generic/gdbtk-hooks.c (tk_command_loop): Ditto for `msg'.
	* generic/gdbtk-cmds.c (gdb_search): Ditto for `switches'.
	(gdbtk_load_source): Ditto for `text_argv'.
	(struct disassembly_client_data ): Ditto for `source_argv'.
	(gdbtk_load_asm): Ditto for `text_argv'.
	(struct disassembly_client_data ): Ditto for `asm_argv'
	(gdb_loadfile): Ditto for `text_argv'.
	* generic/gdbtk.c (TclDebug): Make `v' a constant pointer.
	(gdbtk_init): Ditto for `old_chain', `src_path', `msg', and
	`lib_path'.

2003-02-10  Martin M. Hunt  <hunt@redhat.com>

	* library/browserwin.itb: Set textbackground option to
	$::Colors(textbg) instead of "white".

2003-02-10  Martin M. Hunt  <hunt@redhat.com>	

	* library/interface.tcl (gdbtk_attach_native): Don't force the user
	to choose an exec file when attaching.

	* library/attachdlg.itb: Some fixes to work with latest iwidgets.

2003-02-10  Martin M. Hunt  <hunt@redhat.com>
	
	* library/prefs.tcl (pref_set_defaults): Remove prefs
	gdb/browser/width, gdb/browser/top_height, gdb/browser/view_height,
	gdb/browser/view_is_open. Add gdb/browser/layout.

	* library/browserwin.ith: Update declarations to match 
	changes in browserwin.itb.

	* library/browserwin.itb (constructor): Don't set toplevel
	bindings. Set _layout from prefs.
	(destructor): Don't check $resize_after. Don't save view_is_open.
	(_build_win): Create a popup menu and bind to button 3.
	Split the rest into 4 functions; _build_file_frame, 
	_build_filter_frame, _build_function_frame, and _build_view_frame.
	Pack these 4 frames according to $_layout.
	(_toggle_more): Deleted.
	(_bind_toplevel): Deleted.
	(_do_resize): Deleted.
	(_resize): Deleted.
	(_fill_source): Always fill because source is always visible.
	(_fill_funcs_combo): Limit width of combo to 40 chars.
	(_build_filter_frame): New function.
	(_build_file_frame): New function.
	(_build_function_frame): New function.
	(_build_view_frame): New function.
	(_switch_layout): New function. Toggle between layouts.

	* library/tclIndex: Rebuilt.
	
	* library/help/browser.html: Rewrite.

2003-02-03  Martin M. Hunt  <hunt@redhat.com>

	* library/targetselection.itb (TargetSelection::build_win): Remove 
	duplicate label.

2003-02-03  Martin M. Hunt  <hunt@redhat.com>	

	* library/globalpref.itb, library/mempref.itb, library/srcpref.itb,
	library/srcwin.itb, library/targetselection.itb, library/tracedlg.tcl:
	Set background color of comboboxes to Colors(textbg).

	* library/main.tcl: Load combobox version 2.2.

	* library/prefs.tcl: Minor optimization. Change order of main_names
	to have the most common, "main", first.
	
2003-02-03  Martin M. Hunt  <hunt@redhat.com>
	
	* library/targetselection.itb (TargetSelection::port_list): Keep
	checking ports on Windows until we can open no more. Replaces
	fixed limit of 9.

2003-02-03  Martin M. Hunt  <hunt@redhat.com>
	
	* library/session.tcl (_recreate_bps): Catch errors.

2003-02-03  Martin M. Hunt  <hunt@redhat.com>
	
	* library/interface.tcl (gdbtk_locate_main): Rewrite for efficiency.
	No longer uses gdb_search.  Caches result. 
	(initialize_gdbtk): Initialize gdb_locate_main cache.
	* library/main.tcl: Call initialize_gdbtk after loading prefs.

2003-01-21  Martin M. Hunt  <hunt@redhat.com>
	* library/main.tcl: Don't require iwidgets 3.0.

	* library/console.itb (Console::_build_win): Rename
	tkTextClosestGap to tk::TextClosestGap. Rename tkCancelRepeat
	to tk::CancelRepeat. Rename tkPriv to tk::Priv. Needed for tk 8.4.1.

	* library/bpwin.itb (BpWin::build_win): Don't
	create sizebox.
	* library/locals.tcl (build_win): Ditto.
	* library/regwin.itb (RegWin::_build_win): Ditto.
	* library/srcwin.itb (SrcWin::constructor): Ditto.
	* library/stackwin.itb (StackWin::build_win): Ditto.
	* library/watch.tcl (build_win): Ditto.
	
	* generic/gdbtk.c (gdbtk_init): Look for iwidgets in
	"iwidgets" instead of "iwidgets3.0.0".
	Don't call ide_create_sizebox_command.

	* ChangeLog: New log for 2003.
	* ChangeLog-2002: Renamed from ChangeLog. 

