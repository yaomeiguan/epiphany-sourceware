2001-04-04  Martin M. Hunt  <hunt@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_fileopen): New function.
	Initialize ui_file stuff for gdbtk.
	(gdbtk_fputs): Don't print if gdbtk_disable_fputs. Send
	stdlog and stdtarg to their handler functions.

	* generic/gdbtk.c (Gdbtk_Init): Don't set gdb_stdlog 
	and gdb_stdtarg to gdb_stdout, 
	(gdbtk_init): Unset gdbtk_disable_fputs
	when ready to accept output from gdb. Remove references to
	fputs_unfiltered_hook.
	
	* generic/gdbtk.h: Declare new flag gdbtk_disable_fputs.

	* generic/gdbtk-cmds.c (gdb_restore_fputs): Instead of setting
	fputs_unfiltered_hook, set the new flag gdbtk_disable_fputs.

	* library/prefs.tcl (pref_set_defaults): Add defaults
	for log_fg and target_fg.

	* library/interface.tcl (gdbtk_tcl_fputs_error): Use
	err_tag.
	(gdbtk_tcl_fputs_log): New function. Write log messages
	to console.
	(gdbtk_tcl_fputs_target): New function.	Write target
	IO to console.

	* library/console.ith (einsert): Add tag parameter.
	
	* library/console.itb (_build_win): Add new tags for log 
	and target IO.
	(einsert): Add tag parameter.

2001-04-02  Martin M. Hunt  <hunt@redhat.com>

	* generic/gdbtk-cmds.c (gdb_loadfile): Adjust size of text_argv
	array to prevent writing out of range. Remove unused variables.
	Fix formatting.
	(gdb_get_tracepoint_info): Remove unused variable "fname".
	(gdb_load_disassembly): Remove unused variable "widget".
	(gdb_loc): Remove unused variable "sym".
	(gdb_set_bp_addr): Remove unused variable "line".
	(gdb_get_breakpoint_info): Remove unused variable "sym".
	(get_frame_name): Remove unused variable "name".

2001-03-29  Fernando Nasser  <fnasser@redhat.com>

	* library/variable.tcl (update): Cope with varobj type changes.

2001-03-29  Fernando Nasser  <fnasser@redhat.com>

	* library/variable.tcl (destructor): Remove file_changed_hook hook.

2001-03-29  Fernando Nasser  <fnasser@redhat.com>

	* generic/gdbtk-varobj.c (variable_obj_command): Do not cache varobj
	handles as they may change -- use varobj_get_handle() instead.

2001-03-15  Martin Hunt  <hunt@redhat.com>
	* library/browserwin.itb: Change all references to freeze_me,
	thaw_me and Top to _freeze_me, _thaw_me, and _top to match 
	changes to managedwin.
	
	* library/kod.itb: Ditto.  

2001-03-15  Tom Tromey  <tromey@redhat.com>

	* library/mempref.itb (MemPref::build_win): Correctly set initial
	value of combobox.
	* library/memwin.itb: Added copyright header.
	(MemWin::constructor): Set defaults from preference database.
	(MemWin::reconfig): Update preference database.
	* library/prefs.tcl (pref_save): Save `mem' preferences.
	(pref_set_defaults): Define default memory preferences.

2001-03-08  Andrew Cagney  <ac131313@redhat.com>

	* generic/gdbtk-cmds.c (map_arg_registers): Use REG_NUM instead of
	ARCH_REG_NUM.

2001-03-01  Nicholas Duffek  <nsd@redhat.com>

	* README.GDBTK: Minor spelling, grammar, and formatting fixes.

2001-03-01  Keith Seitz  <keiths@cygnus.com>

	* library/managedwin.ith: Move all implementations into
	managedwin.itb.
	(public variable nosize): Delete.
	(freeze_me, thaw_me, make_icon_window): Prepend with
	underscore to remind people these are not public
	methods/procs.
	(protected variable Top, screenwidth, screenheight): Ditto
	for these variables.
	(protected common manage_active, mainwindow): Delete.
	(enable): Delete.
	(reconfig): Add empty body.
	* library/managedwin.itb: Move all implementations from
	header here.
	Update all references to renamed variables/methods/procs.
	(destructor, restart, shutdown, _open, find) Let
	Itcl tell us which ManagedWins we have lying around.
	(enable): Delete.
	(reconfig): It's empty. Moved empty body to header.

2001-03-01  Nicholas Duffek  <nsd@redhat.com>

	* library/managedwin.itb (ManagedWin::shutdown): Save each
	managed window's geometry as a preference.
	* library/managedwin.ith (ManagedWin::destructor): Don't save
	managed windows' geometries as preferences.

2001-03-01  Nicholas Duffek  <nsd@redhat.com>

	* library/srctextwin.itb (SrcTextWin::location): Clear previous
	pane's cursor after switching panes.

2001-03-01  Nicholas Duffek  <nsd@redhat.com>

	* library/srctextwin.itb (config_win): Give focus to $win.

Tue Feb 27 23:56:23 2001  Andrew Cagney  <ac131313@redhat.com>

	* generic/gdbtk-cmds.c: Include recently created "regcache.h"

2001-02-27  Keith Seitz  <kseitz@nwlink.com>

	* generic/gdbtk-cmds.c (gdb_fetch_registers): Mark
	the result as generating a list only if it really does
	generate a list.

2001-02-21  Fernando Nasser  <fnasser@redhat.com>

	* TODO: New file.  Initial version of the TODO file, as posted to the
	insight list circa October 2000.

2001-02-14  Fernando Nasser  <fnasser@redhat.com>

	From 2001-02-09  Martin Hunt  <hunt@redhat.com>
	* generic/gdbtk-cmds.c (gdb_load_disassembly): In mixed
	mode, source lines should be tagged with source_tag2.

2001-02-08  Fernando Nasser  <fnasser@redhat.com>

	From 2001-02-06  Martin Hunt  <hunt@redhat.com>
	* library/debugwin.itb: Change window name to "Insight Debug"
	* library/embeddedwin.ith: Fix debug messages.
	* library/locals.tcl: Ditto.
	* library/watch.tcl (postMenu): Ditto.
	* library/variables.tcl: Ditto.
	* library/interface.tcl: Ditto.
	* library/regwin.itb: Ditto.
	* library/gdbwin.ith: Ditto.
	* library/srcbar.itcl: Ditto.

2001-02-06  Fernando Nasser  <fnasser@redhat.com>

	Originally from Martin Hunt <hunt@redhat.com>, with modifications
	* library/srcwin.itb (_name): Check for errors when invoking
	gdb_find_file.
	* library/srctextwin.itb (_mtime_changed, location): Ditto.
	* generic/gdbtk-cmds.c (gdb_find_file_command): Better error checking.
	(full_lookup_symtab): Fix misleading comment.

2001-02-04  Fernando Nasser  <fnasser@redhat.com>

	* library/plugins/plugins.tcl: Fix typos and remove "-transient"
	parameter from open command.
	* library/plugins/HOW-TO: New file.  Describes how to add a plug-in
	window to Insight.

2001-02-01  Fernando Nasser  <fnasser@redhat.com>

	* library/images/insight.gif: New splash screen/about graphics.
	* library/images2/insight.gif: New splash screen/about graphics.
	* library/about.tcl: Update copyright, window title and change colors
	to match new splash screen/about images.

2001-02-01  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbtoolbar.itcl (add): New method.  Emulate the style of the
	toolbar iwidget commands.
	(toolbar_show): Old name.
        (show): New name.
	(toolbar_create_button): Old name.
        (create): New name.
	(toolbar_configure_button): Old name.
        (itemconfigure): New name.
        (toolbar_bind_button): Old name.
        (itembind): New name.
        (toolbar_set_button_balloon): Old name.
        (itemballoon): New name.
        (toolbar_add_button): Make private.
        (toolbar_add_label): Ditto.
        (toolbar_add_button_separator): Ditto.
	(toolbar_remove_button): Ditto.
	(tollbar_insert_button): Ditto.
	* library/srcbar.itcl: Adjust to the above syntax.
	* library/plugins/rhabout/rhabout.itcl: Ditto.

2001-02-01  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl (constructor): Remove unused code.
	(add): New method.  Emulate the style of the menubar iwidget commands.
	(menubar_show): Old name.
	(show): New name.
	(menubar_menu_exists): Old name.
	(exists): New name.
	(menubar_clear_menu): Old name.
	(clear): New name.
	(menubar_delete_menu): Old name.
        (delete): New name.
	(menubar_new_menu): Make private.  Does not return anything.
	(menubar_add_menu_command): Make private.
	(menubar_add_menu_separator): Ditto.
	(menubar_change_menu_state): Ditto.
	* library/srcbar.itcl: Adjust to the above syntax.
	* library/plugins/plugins.tcl: Ditto.
	* library/plugins/rhabout/rhabout.itcl: Ditto.

2001-02-01  Fernando Nasser  <fnasser@redhat.com>

	* library/pluginwin.itcl (contrucdtor, destructor): Use "code" to
	specify callbacks.
	(running, stopped, no_inferior): Make it a protected method.
	(childsite): Explicitly mark as a public method.
	* library/plugins/rhabout/rhabout.itcl (constructor): Add a label
	widget to show status messages.
	(running, stopped): Overload versions of the base class; display
	status messages as an example.

2001-01-31  Fernando Nasser  <fnasser@redhat.com>

	* library/pluginwin.itcl: New file.  Implements the PluginWindow
	class that provides some basic functionality for plug-ins.
	* library/plugins/rhabout/rhabout.itcl: Inherit from the new
	PluginWindow class.  Remove code dependent on ModalDlg.
	(constructor): Creates menus and a toolbar to show how these
	PluginWindow components are used.
	* library/tclIndex: Regenerate.

2001-01-31  Fernando Nasser  <fnasser@redhat.com>

	* library/plugins/rhabout.tcl: Add load for optional sample C command 
	procedure.
	* library/plugins/rhabout/rhabout.itcl (constructor): Try calling
	optional sample C command procedure rhabout_extra_text.
	* library/plugins/rhabout/rhabout.c: New file. Implement an example
	plug-in shared library with a sample C command procedure.
	* library/plugins/rhabout/Makefile: New file. Makefile for the sample
	shared library above (Linux only).

2001-01-28  Fernando Nasser  <fnasser@redhat.com>

	* library/plugins: New directory.  Sample plug-in directory to help
	developers of Insight plug-ins.  See README file in that directory.
	* library/plugins/plugins.tcl: New file. Sample version of a code
	fragment file which adds entries to the PlugIn menu of the Source
	Window to activate custom plug-in windows.
	* library/plugins/pkgIndex.tcl: New file.  Sample version of a file
	with package information for the installed plug-ins.
	* library/plugins/rhabout.tcl: New file. Sample file providing a
	plug-in package.
	* library/plugins/rhabout: New directory.  Sample plug-in.
	* library/plugins/rhabout/rhabout.itcl: New file.  Sample class
	implementing a plug-in window.
	* library/plugins/rhabout/tclIndex: New file.  Tcl index for the sample
	plug-in implementation.

2001-01-28  Fernando Nasser  <fnasser@redhat.com>

	* library/main.tcl: Add plugin subdirectory, if existent, to auto_path.
	* library/srcbar.itcl (create_plugin_menu): New method.  Create a pull
	down menu for plugins if there are any for this target configuration.
	(create_menu_items): Invoke the new method above.

2001-01-28  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl (menubar_new_menu): Save lable of a menu to
	use as index.
	(menubar_delete_menu): New function.  Delete a menu.

2001-01-28  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl (menu_list): Add missing declararion for
	global variable.

2001-01-28  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl (set_class_state): Turn off verbose debug
	messages.
	* library/gdbtoolbar.itcl (set_class_state): Ditto.

2001-01-26  Fernando Nasser  <fnasser@redhat.com>

	* generic/gdbtk-cmds.c (gdb_clear_file): Call exec_file_clear() and
	symbol_file_clear() instead of exec_file_command() and
	symbol_file_command().
	(gdb_find_file_command): Return the proper error text.

2001-01-25  Fernando Nasser  <fnasser@redhat.com>

	* library/srcbar.itcl: New file. Implement SrcBar, a menu and toolbar
	for the Source Window (code previously in srcmenubar.itcl and
	srctoolbar.itcl).
	* library/srcmenubar.itcl: Remove obsolete file.
	* library/srctoolbar.itcl: Remove obsolete file.
	* library/srcbar.tcl: Remove obsolete file.
	* library/gdbmenubar.itcl (menubar_show): New method. Associate the
	menu with the toplevel window.
        * library/srcwin.itb (_build_win): Use SrcBar.
	* library/tclIndex: Regenerate.

2001-01-24  Fernando Nasser  <fnasser@redhat.com>

	From  Martin Hunt  <hunt@cygnus.com>
	* generic/gdbtk-cmds.c (gdb_set_bp_addr, gdb_set_bp): Change
	strsave() to xstrdup().

2001-01-24  Fernando Nasser  <fnasser@redhat.com>

	From  Martin Hunt  <hunt@cygnus.com>
	* generic/gdbtk-cmds.c (gdbtk_dis_asm_read_memory): Fix call
	to xfer_memory().

2001-01-19  Fernando Nasser  <fnasser@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Set default value of
	gdb/src/top_control to place the source window controls at the top.

2001-01-18  Fernando Nasser  <fnasser@redhat.com>

        * library/srctextwin.itb (_highlightAsmLine): Add missing FUNCNAME
	parameter.
        (FillAssembly, FillMixed): Pass the FUNCNAME parameter that is
        needed by the above method.
        * library/srctextwin.ith (_highlightAsmLine): Add FUNCNAME parameter
	to method definition.

2001-01-17  Fernando Nasser  <fnasser@redhat.com>

        * library/srctextwin.itb (_highlightAsmLine): Add missing FILENAME
	parameter.
        (FillAssembly, FillMixed): Pass the FILENAME parameter that is
        needed by the above method.
        * library/srctextwin.ith (_highlightAsmLine): Add FILENAME parameter
	to method definition.

2001-01-15  Fernando Nasser  <fnasser@redhat.com>

	* srcwin.itb (clear_file): Pass the appropriate value to the GO 
	argument of mode() so it does not try to read a source file when
	no executable is loaded.

2001-01-09  Fernando Nasser  <fnasser@redhat.com>

	* library/srcmenubar.itcl (create_file_menu): Add missing incr for
	session numbers.

2001-01-04  Fernando Nasser  <fnasser@redhat.com>

	The following changes fix the problem of having to click on a splash
	window to make it disapear.
	* modal.tcl (post): Take as an argument "expire", the time a modal
	window is displayed.
	* managedwin.itb (open): Check for an "expire" argument and pass the
	value down to modal post method.

2001-01-04  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl (set_class_state): New public method.
	Standard method to control state by class.
	(menubar_menu_class_find): Delete public accessor method.
	(menubar_change_menu_state): Change the state of a menu item
	not of a whole class list.
	* library/srcmenubar.itcl (enable_ui): Use set_class_state instead
	of prying into base class internal data.
        * library/gdbtoolbar.itcl (set_class_state): New public method.
        Standard method to control state by class.
        (toolbar_button_class_find): Delete public accessor method.
	* library/srctoolbar.itcl (enable_ui): Use set_class_state instead
	of prying into base class internal data.

2001-01-04  Fernando Nasser  <fnasser@redhat.com>

	* library/interface.tcl (gdbtk_connect): New proc. Connects to ai
	 remote target (code previously at library/gdbmenubar.itcl).
	(disconnect): Rename to...
	(gdbtk_disconnect): New name for proc disconnect.
	* library/srcmenubar.itcl (do_connect): Remove the code mentioned
	above and call the new interface proc gdbtk_connect.
	Also, call ::update idletasks after changing the state of the
	menu entries.
	(do_detach): Call gdbtk_disconnect, not ::disconnect (old name).
	(do_disconnect): Call gdbtk_disconnect, not disconnect (old name).

2001-01-03  Fernando Nasser  <fnasser@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Define gdb/src/top_control
	to allow the source window controls to be placed at the top.
	* library/srcwin.itb (_build_win): Test for gdb/src/top_control
	and place the controls accordingly.

2001-01-02  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl: New file. Define the GDBMenuBar class,
	a generic menubar building facility for Insight windows (WIP).
	* library/gdbtoolbar.itcl: New file. Define the GDBToolBar class,
	a generic toolbar building facility for Insight windows (WIP).
	* library/srcmenubar.itcl: New file. Define the SrcMenuBar class,
	which implements the Source Window menubar (inherits GDBMenuBar).
	* library/srctoolbar.itcl: New file. Define the SrcToolBar class,
	which implements the Source Window toolbar (inherits GDBToolBar).
	* library/srcwin.itb (_build_win): Use SrcMenuBar and SrcToolBar
	instead of the obsolete GDBSrcBar.
	* library/srcbar.tcl: Mark as OBSOLETE.
	* library/toolbar.tcl: Mark as OBSOLETE. Rename class GDBToolBar
	to avoid conflict with new class with the same name.
	* library/Makefile (TCL): Include .itcl files.
	* library/tclIndex: Regenerate.

2001-01-02  Fernando Nasser  <fnasser@redhat.com>

	* library/srcwin.itb (_build_win): If gdb is running a program, load
	the window with source for that location (if available).
	(download_progress): Calls to "update" must refer to the global
	namespace.

2001-01-02  Fernando Nasser  <fnasser@redhat.com>

	* library/interface.tcl (gdbtk_quit_check): Save session whenever
	possible.

2001-01-01  Fernando Nasser  <fnasser@redhat.com>

	* library/ChangeLog-2000: New file. Entries dated 2000 moved here
        from library/ChangeLog.
        * library/ChangeLog: Removed. 
        * generic/ChangeLog-2000: New file. Entries dated 2000 moved here
        from library/ChangeLog.
        * generic/ChangeLog: Removed.

2000-12-14  Fernando Nasser  <fnasser@redhat.com>

	* library/ChangeLog-1999: New file. Entries dated 1999 moved here
	from library/ChangeLog.
	* library/ChangeLog-1998: New file.  Similar change for 1998.
	* library/ChangeLog-1997: New file.  Similar change for 1997.
	* library/ChangeLog: Removed entries previous to 2000.
	* generic/ChangeLog-1999: New file. Entries dated 1999 moved here
	from library/ChangeLog.
	* generic/ChangeLog-1998: New file.  Similar change for 1998.
	* generic/ChangeLog-1997: New file.  Similar change for 1997.
	* generic/ChangeLog: Removed entries previous to 2000.

2000-04-17  Jonathan Larmour  <jlarmour@redhat.co.uk>

	* ChangeLog-gdbtk: Renamed to ChangeLog
	* ChangeLog: New file
	* README.GDBTK: No need for changelog-default-name hint for Emacs now

Sat Feb  5 00:14:30 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* gdb.rc, gdbtool.ico, README.GDBTK: To here from top level GDB
 	directory.
	* gdb/gdbtcl2: Directory moved to gdbtk/library.
	* gdb/gdbtk/generic: New directory.
	
