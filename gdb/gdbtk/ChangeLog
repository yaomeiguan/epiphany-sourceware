2001-05-31  Keith Seitz  <keiths@redhat.com>

	* library/interface.tcl (gdb_idle_hook): Mark as deprecated.
	(gdbtk_idle): Dispatch an IdleEvent. gdb_idle_hook is gone.
	* library/ehandler.ith (idle): New event handler.
	* library/gdbevent.ith (IdleEvent): New event.
	* library/console.ith (idle): Match event handler definition.
	* library/console.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/kod.ith (idle): Match event handler definition.
	* library/kod.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/memwin.ith (idle): Match event handler definition.
	* library/memwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/pluginwin.itcl (stopped): Rename to "idle" and
	match event handler definition.
	Fix misleading comments.
	* library/process.ith (idle): Match event handler definition.
	* library/process.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/regwin.ith (idle): Match event handler definition.
	* library/regwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/srcbar.itcl (idle): New method.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/srcwin.ith (idle): Match event handler definition.
	* library/srcwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/stackwin.ith (idle): Match event handler definition.
	* library/stackwin.itb (idle): Ditto.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/variables.tcl (idle): Match event handler definition.
	(constructor): Remove gdb_idle_hook.
	(destructor): Ditto.
	* library/plugins/rhabout/rhabout.itcl (stopped): Rename
	to "idle" and match new event handler definition.
	* library/tclIndex: Regenerated.

2001-05-31  Keith Seitz  <keiths@redhat.com>

	* library/interface.tcl (gdb_busy_hook): Deprecate.
	(gdbtk_busy): Create and dispatch a BusyEvent instead
	of running hooks.
	* library/ehandler.ith (busy): New event handler.
	* library/gdbevent.ith (BusyEvent): New event class.
	* library/console.ith: Inherit from GDBEventHandler.
	(busy): Match event handler definition.
	* library/console.itb (busy): Ditto.
	(constructor): Remove gdb_busy_event.
	(destructor): Ditto.
	* library/kod.ith (busy): Match event handler definition.
	* library/kod.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/memwin.ith (busy): Match event handler definition.
	* library/memwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/pluginwin.itcl (running): Rename to "busy" and
	match event handler definition.
	(consturctor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/process.ith (busy): Match event handler definition.
	* library/process.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/regwin.ith (busy): Match event handler definition.
	* library/regwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/srcbar.itcl (constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	(busy): New method.
	* library/srcwin.ith (busy): Match event handler definition.
	* library/srcwin.itb (busy): Ditto.
	Only do the "busy" stuff if do_updates is set.
	(toggle_updates): Remove gdb_busy_hook.
	(constructor): Ditto.
	(destructor): Ditto.
	* library/stackwin.ith (busy): Match event handler definition.
	* library/stackwin.itb (busy): Ditto.
	(constructor): Remove gdb_busy_hook.
	(destructor): Ditto.
	* library/variables.tcl (constructor): Ditto.
	(destructor): Ditto.
	(disable_ui): Rename to "busy" and match event handler
	definition.
	* library/plugins/rhabout/rhabout.itcl (running): Rename
	to "busy" and match new event handler definition.
	* library/tclIndex: Regenerated.

2001-05-25  Keith Seitz  <keiths@cygnus.com>

	* generic/gdbtk-cmds.c (bin2hex): New function.
	(fromhex): New function.
	(gdb_set_mem): New function.
	(Gdbtk_Init): Add new command, "gdb_set_mem".
	* library/memwin.itb (edit): Use "gdb_set_mem" to set
	memory, not some gdb_cmd contrivance.
	When sending data to gdb_set_mem, make sure that it
	is properly zero-padded.

2001-05-22  Keith Seitz  <keiths@cygnus.com>

	* memwin.ith (error_dialog): Declare public method.
	* memwin.itb (error_dialog): Define.
	(edit): When attempting to set memory, post an error dialog
	if gdb told us an error occurred while writing the memory.

2001-05-22  Keith Seitz  <keiths@cygnus.com>

	* library/interface.tcl (gdbtk_tcl_file_changed): Handle
	the case of empty-string files, sent by gdb when the
	user requests to reset the file.
	(_close_file): New proc to deal with closing an exe.
	* library/srcbar.itcl (create_file_menu): Add "Close" menu
	option.
	(create_view_menu): Change key binding for Watch Window to
	Ctrl+T to accomodate "Close" going to Ctrl+W.
	* library/srctextwin.itb (config_win): Update key binding
	for Watch Window.
	Add key binding for Close.
	(do_key): Add "close".
	(_clear_cache): Finally implement. I think this works now.

2001-05-22  Keith Seitz  <keiths@cygnus.com>

	* library/variables.tcl (postMenu): Add mysterious workaround
	for popup menu bug in Tk for windows.
	Highlight the selection, too.

2001-05-21  Keith Seitz  <keiths@cygnus.com>

	* library/managedwin.itb (_create): Check the geometry of
	any window we create. Don't create a window that is
	bigger than the screen.

2001-05-18  Keith Seitz  <keiths@cygnus.com>

	* library/managedwin.ith (_geometry): Use a protected variable
	instead of a global from ManagedWin::reveal.
	(open): Make arg list reflect managedwin.itb.
	* library/managedwin.itb (window_name): Use class variable
	_top instead of recomputing the toplevel every time.
	(reveal): Ditto.
	Use class variable "_geometry" instead of global variable.
	(shutdown): Do not save ModalDialogs.
	(_create): If centering the new window, use libgui's
	center_window to do it.

2001-05-18  Keith Seitz  <keiths@cygnus.com>

	* generic/gdbtk-hooks.c (gdbtk_wait): Change integer pid
	argument to match gdb's new "ptid_t" pids.

2001-05-14  Keith Seitz  <keiths@cygnus.com>

	* library/interface.tcl (gdbtk_quit_check): Don't save sessions
	here. It doesn't work for the Console Window.
	(gdbtk_cleanup): Save session information here.
	(gdbtk_tcl_exec_file_display): When files are loaded,
	get the full pathname to the exe.

2001-05-11  Tom Tromey  <tromey@redhat.com>

	* library/prefs.tcl (pref_save): Fix bug when key in gdb space has
	extra `/' in it.

2001-05-11  Kevin Buettner  <kevinb@redhat.com>

	* generic/gdbtk-bp.c (set_raw_breakpoint): Revise declaration
	to match the recently changed declaration in breakpoint.c. 
	Update all callers.

2001-05-11  Keith Seitz  <keiths@cygnus.com>

	* generic/gdbtk-bp.c (gdbtk_create_breakpoint): Safe guard
	against "invalid" (internal) breakpoint numbers.
	(gdbtk_modify_breakpoint): Ditto.
	(gdbtk_delete_breakpoint): Ditto.

2001-05-10  Keith Seitz  <keiths@cygnus.com>

	* generic/gdbtk-bp.c (gdb_set_bp): Generate a breakpoint event
	when we create a breakpoint. The hook is no longer used.
	(gdb_set_bp_addr): Ditto.

2001-05-10  Keith Seitz  <keiths@cygnus.com>

	* generic/gdbtk-bp.c (breakpoint_list, breakpoint_list_size): New
	variables. Gdb is forcing us to maintain our own breakpoint
	database.
	(Gdbtk_Breakpoint_Init): Initialize our breakpoint database.
	(gdb_find_bp_at_addr): Use our breakpoint database.
	(gdb_find_bp_at_line): Ditto.
	(gdb_get_breakpoint_list): Ditto.
	(gdb_get_breakpoint_info): Remove deleted breakpoint hack.
	(gdbtk_create_breakpoint): Moved here from gdbtk-hooks.c.
	Add breakpoint to our breakpoint database.
	(gdbtk_modify_breakpoint): Ditto the move.
	(gdbtk_delete_breakpoint): Ditto the move.
	Remove breakpoint from our database.
	(gdb_get_tracepoint_info): Remove delete tracepoint hack.
	It's not needed for tracepoints: they were implemented properly.
	(gdbtk_create_tracepoint): Moved here from gdbtk-hooks.c.
	(gdbtk_modify_tracepoint): Ditto.
	(gdbtk_delete_tracepoint): Ditto.
	* generic/gdbtk-hooks.c: Include "gdb-events.h".
	(gdbtk_create_breakpoint): Moved to gdbtk-bp.c
	(gdbtk_modify_breakpoint): Ditto.
	(gdbtk_delete_breakpoint): Ditto.
	(breakpoint_notify): Ditto.
	(gdbtk_create_tracepoint): Ditto.
	(gdbtk_modify_tracepoint): Ditto.
	(gdbtk_delete_tracepoint): Ditto.
	(tracepoint_notify): Ditto.
	(report_error): No longer static.
	(gdbtk_add_hooks): Create our own event handler
	vector and register breakpoint_create, breakpoint_modify,
	and breakpoint_delete handlers in gdbtk-bp.c.

2001-05-10  Keith Seitz  <keiths@cygnus.com>

	* generic/gdbtk-cmds.c: Put on diet. All breakpoint-,
	tracepoint-, register-, and stack-related functions moved
	into separate files.
	(call_wrapper): Renamed to "gdbtk_call_wrapper" and export.
	Update all callers.
	* generic/gdbtk.h: Move all breakpoint-related stuff into
	gdbtk-bp.c.
	Remove declaration for "call_wrapper". Now in gdbtk-cmds.h
	(and called "gdbtk_call_wrapper").
	* generic/gdbtk-varobj.c: Include "gdbtk-cmds.h".
	* generic/gdbtk-cmds.h: New file.
	* generic/gdbtk-bp.c: New file.
	* generic/gdbtk-register.c: New file.
	* generic/gdbtk-stack.c: New file.

2001-05-09  Keith Seitz  <keiths@cygnus.com>

	* library/interface.tcl (gdb_quit_hook): Remove. It's unused.
	(gdbtk_quit): Do no shutdown window manager and save
	preferences here.
	(gdbtk_cleanup): This is the proper place to do those
	things.

2001-05-07  Keith Seitz  <keiths@cygnus.com>

	* library/globalpref.itb (build_win): Preserve the
	current working directory.

2001-05-06  Kevin Buettner  <kevinb@redhat.com>

	* generic/gdbtk-cmds.c (gdb_target_has_execution_command)
	(get_clear_file): Use ptid_equal() for comparing ptid values. 
	Use ``null_ptid'' instead of 0 in comparisons against
	``inferior_ptid''.

	From Phil Edwards <pedwards@disaster.jaj.com>:
	* generic/gdbtk-cmds.c (gdb_target_has_execution_command)
	(get_clear_file): Rename ``inferior_pid'' to ``inferior_ptid''.

2001-05-01  Keith Seitz  <keiths@cygnus.com>

        * gdbtk.c (gdbtk_init): Include the command "warp_pointer"
        for all platforms. Used for testing ONLY.

        * util.tcl (gdbtk_read_defs): If there is an error reading
        the testsuite definition file, print the error message to
        stderr, not stdout. This will allow tcl to know that an error
        has occurred.
        (find_iwidgets_library): Make it work for running testsuites
        from installed directory.

        * main.tcl: If we failed to find iwidgets, check if the
        testsuite is running. If it is running, do not pop up
        a dialog box: just print out the error and exit.
        Initialize _test(verbose) for the testsuite.

2001-04-23  Keith Seitz  <keiths@cygnus.com>

	* generic/gdbtk-cmds.c (gdb_get_breakpoint_info): If unable
	to find the requested breakpoint for lookup, check if
	it is about to be deleted and return information about
	that breakpoint.
	(gdb_get_tracepoint_info): Ditto for tracepoints.
	* generic/gdbtk-hooks.c (gdbtk_deleted_bp): New global.
	(gdbtk_delete_breakpoint): Remember the deleted breakpoint
	for gdb_get_breakpoint_info, in case it is called during
	the event notification.
	(gdbtk_delete_tracepoints): Ditto for tracepoints.

	* generic/gdbtk-cmds.c (gdb_entry_point): Return an empty
	string when there is no active target (i.e., there is no
	entry point to return yet).

2001-04-20  Keith Seitz  <keiths@cygnus.com>

	* library/srctextwin.ith (handle_set_hook): Rename to set_variable.
	* library/srctextwin.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/srcbar.itcl: Inherit from GDBEventHandler.
	(set_hook): Rename to set_variable and handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/regwin.ith (handle_set_hook): Renamed to set_variable.
	* library/regwin.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/kod.ith (set_os): Renamed to "set_variable".
	* library/kod.itb (set_variable): Handle SetVariableEvent.
	(constructor): Remove gdb_set_hook.
	(destructor): Ditto.
	* library/tclIndex: Regenerated.

2001-04-20  Keith Seitz  <keiths@cygnus.com>

	* library/interface.tcl (gdbtk_tcl_set_variable): New proc.
	* library/gdbevent.ith (SetVariableEvent): New event.
	* library/gdbevent.itb (SetVariableEvent::get): Override
	GDBEvent::get.
	* library/ehandler.ith (set_variable): New public method.
	* generic/gdbtk-hooks.c (gdbtk_set_hook): Let inteface function
	gdbtk_tcl_set_variable do all the work.
	* tclIndex: Regenerated.

2001-04-19  Keith Seitz  <keiths@cygnus.com>

	* library/gdbevent.ith: New file. Defines new event model.
	* library/gdbevent.itb: New file. Implements new event
	model.
	* library/ehandler.ith: New file. Defines new event model.
	* library/ehandler.itb: New file. Implements new event
	model.
	* library/gdbwin.ith: Inherit from GDBEventHandler.
	(update): Delete unused method.
	(_state): Delete unused variable.
	* library/tclIndex: Regenerated.

	* generic/gdbtk-cmds.c (gdb_set_bp): Use create_breakpoint_hook
	to notify gui of changes.
	(gdb_set_bp_addr): Ditto.
	(gdb_get_breakpoint_info): Update comments to match reality.
	* generic/gdbtk-hooks.c (breakpoint_notify): Only pass the
	breakpoint number which generated the event.
	(tracepoint_notify): Ditto for tracepoints.
	* library/interface.tcl (gdb_breakpoint_change_hook): Mark
	as deprecated and comment out definition.
	(gdbtk_tcl_breakpoint): Use new GDBEvent event "breakpoint"
	to notify rest of UI about breakpoint event.
	(gdbtk_tcl_tracepoint): Ditto for "tracepoint" event.
	* library/bpwin.ith (update): Renamed to "breakpoint".
	(breakpoint): New public method.
	(tracepoint): New public method.
	(bp_add): Take event as argument instead of number.
	(bp_modify): Ditto.
	(bp_delete): Ditto.
	* library/bpwin.itb (constructor): Remove
	gdb_breakpoint_changed_hook.
	(destructor): Ditto.
	(build_win): Insert any existing breakpoints by
	making BreakpointEvents for them.
	(breakpoint): Renamed from "update" to handle
	breakpoint events.
	Remove code to deal with tracepoints.
	(tracepoint): New method to handle tracepoint
	events.
	(bp_add): Deal with breakpoint events, not breakpoint
	numbers.
	(bp_modify): Ditto.
	(bp_delete): Ditto.
	* library/srctextwin.ith: Inherit from GDBWin.
	(breakpoint): New public method.
	(tracepoint): New public method.
	* library/srctextwin.itb (constructor): Remove
	gdb_breakpoint_changed_hook.
	(destructor): Ditto.
	(breakpoint): New method to handle breakpoint event.
	(tracepoint): New method to handle tracepoint event.
	(do_bp): Handle duplicate breakpoints for asm, too.
	(remove_bp_at_line): Delete breakpoints by number, not
	linespec. clear_command removes breakpoints from the
	breakpoint_chain BEFORE deleting the breakpoint. delete_command
	does this afterward (so we can call gdb_get_breakpoint_info on
	an about-to-be-deleted breakpoint).

2001-04-18  Martin M. Hunt  <hunt@redhat.com>
	
	* generic/gdbtk.c (gdbtk_init): Initialize uiout.

2001-04-18  Tom Tromey  <tromey@redhat.com>

	* library/interface.tcl (run_executable): Use
	gdb_set_inferior_args.
	* library/session.tcl (session_load): Use gdb_set_inferior_args.
	* generic/gdbtk-cmds.c (Gdbtk_Init): Register
	gdb_set_inferior_args.
	(gdb_get_inferior_args): New function.

2001-04-17  Tom Tromey  <tromey@redhat.com>

	* library/session.tcl (session_save): Use gdb_get_inferior_args.
	* generic/gdbtk-cmds.c (inferior_args): Removed.
	(Gdbtk_Init): Don't register gdb_inferior_args variable.  Do
	register gdb_get_inferior_args function.
	(gdb_get_inferior_args): New function.

2001-04-17  Fernando Nasser  <fnasser@redhat.com>

	* library/variables.tcl (update): Temporary fix to the detection of
	"type_changed" condition.  Proper fix will require that this condition
	is properly reported by the underlying code.

2001-04-12  Nicholas Duffek  <nsd@redhat.com>

	* generic/gdbtk-cmds.c (gdb_entry_point): New TCL command.
	* library/interface.tcl (gdbtk_locate_main): Try the program's
	entry point if no main function is found.

2001-04-10  Keith Seitz  <keiths@cygnus.com>

	From Tom Tromey (tromey@redhat.com):
	* library/managedwin.itb (reveal): We actually do want to force
	the focus for Windows.

2001-04-09  Martin M. Hunt  <hunt@redhat.com>

	* library/managedwin.itb (ManagedWin::reveal): After
	deiconifying window for the first time, set its geometry
	again, if the platform is unix. This fixes a problem with kde.
	(ManagedWin::_create): Set a variable with the initial
	geometry.

2001-04-04  Christopher Faylor  <cgf@redhat.com>

	* generic/gdbtk.c: Add __CYGWIN__ conditional to WIN32 test.

2001-04-04  Martin M. Hunt  <hunt@redhat.com>

	* generic/gdbtk-hooks.c (gdbtk_fileopen): New function.
	Initialize ui_file stuff for gdbtk.
	(gdbtk_fputs): Don't print if gdbtk_disable_fputs. Send
	stdlog and stdtarg to their handler functions.

	* generic/gdbtk.c (Gdbtk_Init): Don't set gdb_stdlog 
	and gdb_stdtarg to gdb_stdout, 
	(gdbtk_init): Unset gdbtk_disable_fputs
	when ready to accept output from gdb. Remove references to
	fputs_unfiltered_hook.
	
	* generic/gdbtk.h: Declare new flag gdbtk_disable_fputs.

	* generic/gdbtk-cmds.c (gdb_restore_fputs): Instead of setting
	fputs_unfiltered_hook, set the new flag gdbtk_disable_fputs.

	* library/prefs.tcl (pref_set_defaults): Add defaults
	for log_fg and target_fg.

	* library/interface.tcl (gdbtk_tcl_fputs_error): Use
	err_tag.
	(gdbtk_tcl_fputs_log): New function. Write log messages
	to console.
	(gdbtk_tcl_fputs_target): New function.	Write target
	IO to console.

	* library/console.ith (einsert): Add tag parameter.
	
	* library/console.itb (_build_win): Add new tags for log 
	and target IO.
	(einsert): Add tag parameter.

2001-04-02  Martin M. Hunt  <hunt@redhat.com>

	* generic/gdbtk-cmds.c (gdb_loadfile): Adjust size of text_argv
	array to prevent writing out of range. Remove unused variables.
	Fix formatting.
	(gdb_get_tracepoint_info): Remove unused variable "fname".
	(gdb_load_disassembly): Remove unused variable "widget".
	(gdb_loc): Remove unused variable "sym".
	(gdb_set_bp_addr): Remove unused variable "line".
	(gdb_get_breakpoint_info): Remove unused variable "sym".
	(get_frame_name): Remove unused variable "name".

2001-03-29  Fernando Nasser  <fnasser@redhat.com>

	* library/variables.tcl (update): Cope with varobj type changes.

2001-03-29  Fernando Nasser  <fnasser@redhat.com>

	* library/variables.tcl (destructor): Remove file_changed_hook hook.

2001-03-29  Fernando Nasser  <fnasser@redhat.com>

	* generic/gdbtk-varobj.c (variable_obj_command): Do not cache varobj
	handles as they may change -- use varobj_get_handle() instead.

2001-03-15  Martin Hunt  <hunt@redhat.com>
	* library/browserwin.itb: Change all references to freeze_me,
	thaw_me and Top to _freeze_me, _thaw_me, and _top to match 
	changes to managedwin.
	
	* library/kod.itb: Ditto.  

2001-03-15  Tom Tromey  <tromey@redhat.com>

	* library/mempref.itb (MemPref::build_win): Correctly set initial
	value of combobox.
	* library/memwin.itb: Added copyright header.
	(MemWin::constructor): Set defaults from preference database.
	(MemWin::reconfig): Update preference database.
	* library/prefs.tcl (pref_save): Save `mem' preferences.
	(pref_set_defaults): Define default memory preferences.

2001-03-08  Andrew Cagney  <ac131313@redhat.com>

	* generic/gdbtk-cmds.c (map_arg_registers): Use REG_NUM instead of
	ARCH_REG_NUM.

2001-03-01  Nicholas Duffek  <nsd@redhat.com>

	* README.GDBTK: Minor spelling, grammar, and formatting fixes.

2001-03-01  Keith Seitz  <keiths@cygnus.com>

	* library/managedwin.ith: Move all implementations into
	managedwin.itb.
	(public variable nosize): Delete.
	(freeze_me, thaw_me, make_icon_window): Prepend with
	underscore to remind people these are not public
	methods/procs.
	(protected variable Top, screenwidth, screenheight): Ditto
	for these variables.
	(protected common manage_active, mainwindow): Delete.
	(enable): Delete.
	(reconfig): Add empty body.
	* library/managedwin.itb: Move all implementations from
	header here.
	Update all references to renamed variables/methods/procs.
	(destructor, restart, shutdown, _open, find) Let
	Itcl tell us which ManagedWins we have lying around.
	(enable): Delete.
	(reconfig): It's empty. Moved empty body to header.

2001-03-01  Nicholas Duffek  <nsd@redhat.com>

	* library/managedwin.itb (ManagedWin::shutdown): Save each
	managed window's geometry as a preference.
	* library/managedwin.ith (ManagedWin::destructor): Don't save
	managed windows' geometries as preferences.

2001-03-01  Nicholas Duffek  <nsd@redhat.com>

	* library/srctextwin.itb (SrcTextWin::location): Clear previous
	pane's cursor after switching panes.

2001-03-01  Nicholas Duffek  <nsd@redhat.com>

	* library/srctextwin.itb (config_win): Give focus to $win.

Tue Feb 27 23:56:23 2001  Andrew Cagney  <ac131313@redhat.com>

	* generic/gdbtk-cmds.c: Include recently created "regcache.h"

2001-02-27  Keith Seitz  <kseitz@nwlink.com>

	* generic/gdbtk-cmds.c (gdb_fetch_registers): Mark
	the result as generating a list only if it really does
	generate a list.

2001-02-21  Fernando Nasser  <fnasser@redhat.com>

	* TODO: New file.  Initial version of the TODO file, as posted to the
	insight list circa October 2000.

2001-02-14  Fernando Nasser  <fnasser@redhat.com>

	From 2001-02-09  Martin Hunt  <hunt@redhat.com>
	* generic/gdbtk-cmds.c (gdb_load_disassembly): In mixed
	mode, source lines should be tagged with source_tag2.

2001-02-08  Fernando Nasser  <fnasser@redhat.com>

	From 2001-02-06  Martin Hunt  <hunt@redhat.com>
	* library/debugwin.itb: Change window name to "Insight Debug"
	* library/embeddedwin.ith: Fix debug messages.
	* library/locals.tcl: Ditto.
	* library/watch.tcl (postMenu): Ditto.
	* library/variables.tcl: Ditto.
	* library/interface.tcl: Ditto.
	* library/regwin.itb: Ditto.
	* library/gdbwin.ith: Ditto.
	* library/srcbar.itcl: Ditto.

2001-02-06  Fernando Nasser  <fnasser@redhat.com>

	Originally from Martin Hunt <hunt@redhat.com>, with modifications
	* library/srcwin.itb (_name): Check for errors when invoking
	gdb_find_file.
	* library/srctextwin.itb (_mtime_changed, location): Ditto.
	* generic/gdbtk-cmds.c (gdb_find_file_command): Better error checking.
	(full_lookup_symtab): Fix misleading comment.

2001-02-04  Fernando Nasser  <fnasser@redhat.com>

	* library/plugins/plugins.tcl: Fix typos and remove "-transient"
	parameter from open command.
	* library/plugins/HOW-TO: New file.  Describes how to add a plug-in
	window to Insight.

2001-02-01  Fernando Nasser  <fnasser@redhat.com>

	* library/images/insight.gif: New splash screen/about graphics.
	* library/images2/insight.gif: New splash screen/about graphics.
	* library/about.tcl: Update copyright, window title and change colors
	to match new splash screen/about images.

2001-02-01  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbtoolbar.itcl (add): New method.  Emulate the style of the
	toolbar iwidget commands.
	(toolbar_show): Old name.
        (show): New name.
	(toolbar_create_button): Old name.
        (create): New name.
	(toolbar_configure_button): Old name.
        (itemconfigure): New name.
        (toolbar_bind_button): Old name.
        (itembind): New name.
        (toolbar_set_button_balloon): Old name.
        (itemballoon): New name.
        (toolbar_add_button): Make private.
        (toolbar_add_label): Ditto.
        (toolbar_add_button_separator): Ditto.
	(toolbar_remove_button): Ditto.
	(tollbar_insert_button): Ditto.
	* library/srcbar.itcl: Adjust to the above syntax.
	* library/plugins/rhabout/rhabout.itcl: Ditto.

2001-02-01  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl (constructor): Remove unused code.
	(add): New method.  Emulate the style of the menubar iwidget commands.
	(menubar_show): Old name.
	(show): New name.
	(menubar_menu_exists): Old name.
	(exists): New name.
	(menubar_clear_menu): Old name.
	(clear): New name.
	(menubar_delete_menu): Old name.
        (delete): New name.
	(menubar_new_menu): Make private.  Does not return anything.
	(menubar_add_menu_command): Make private.
	(menubar_add_menu_separator): Ditto.
	(menubar_change_menu_state): Ditto.
	* library/srcbar.itcl: Adjust to the above syntax.
	* library/plugins/plugins.tcl: Ditto.
	* library/plugins/rhabout/rhabout.itcl: Ditto.

2001-02-01  Fernando Nasser  <fnasser@redhat.com>

	* library/pluginwin.itcl (contrucdtor, destructor): Use "code" to
	specify callbacks.
	(running, stopped, no_inferior): Make it a protected method.
	(childsite): Explicitly mark as a public method.
	* library/plugins/rhabout/rhabout.itcl (constructor): Add a label
	widget to show status messages.
	(running, stopped): Overload versions of the base class; display
	status messages as an example.

2001-01-31  Fernando Nasser  <fnasser@redhat.com>

	* library/pluginwin.itcl: New file.  Implements the PluginWindow
	class that provides some basic functionality for plug-ins.
	* library/plugins/rhabout/rhabout.itcl: Inherit from the new
	PluginWindow class.  Remove code dependent on ModalDlg.
	(constructor): Creates menus and a toolbar to show how these
	PluginWindow components are used.
	* library/tclIndex: Regenerate.

2001-01-31  Fernando Nasser  <fnasser@redhat.com>

	* library/plugins/rhabout.tcl: Add load for optional sample C command 
	procedure.
	* library/plugins/rhabout/rhabout.itcl (constructor): Try calling
	optional sample C command procedure rhabout_extra_text.
	* library/plugins/rhabout/rhabout.c: New file. Implement an example
	plug-in shared library with a sample C command procedure.
	* library/plugins/rhabout/Makefile: New file. Makefile for the sample
	shared library above (Linux only).

2001-01-28  Fernando Nasser  <fnasser@redhat.com>

	* library/plugins: New directory.  Sample plug-in directory to help
	developers of Insight plug-ins.  See README file in that directory.
	* library/plugins/plugins.tcl: New file. Sample version of a code
	fragment file which adds entries to the PlugIn menu of the Source
	Window to activate custom plug-in windows.
	* library/plugins/pkgIndex.tcl: New file.  Sample version of a file
	with package information for the installed plug-ins.
	* library/plugins/rhabout.tcl: New file. Sample file providing a
	plug-in package.
	* library/plugins/rhabout: New directory.  Sample plug-in.
	* library/plugins/rhabout/rhabout.itcl: New file.  Sample class
	implementing a plug-in window.
	* library/plugins/rhabout/tclIndex: New file.  Tcl index for the sample
	plug-in implementation.

2001-01-28  Fernando Nasser  <fnasser@redhat.com>

	* library/main.tcl: Add plugin subdirectory, if existent, to auto_path.
	* library/srcbar.itcl (create_plugin_menu): New method.  Create a pull
	down menu for plugins if there are any for this target configuration.
	(create_menu_items): Invoke the new method above.

2001-01-28  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl (menubar_new_menu): Save lable of a menu to
	use as index.
	(menubar_delete_menu): New function.  Delete a menu.

2001-01-28  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl (menu_list): Add missing declararion for
	global variable.

2001-01-28  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl (set_class_state): Turn off verbose debug
	messages.
	* library/gdbtoolbar.itcl (set_class_state): Ditto.

2001-01-26  Fernando Nasser  <fnasser@redhat.com>

	* generic/gdbtk-cmds.c (gdb_clear_file): Call exec_file_clear() and
	symbol_file_clear() instead of exec_file_command() and
	symbol_file_command().
	(gdb_find_file_command): Return the proper error text.

2001-01-25  Fernando Nasser  <fnasser@redhat.com>

	* library/srcbar.itcl: New file. Implement SrcBar, a menu and toolbar
	for the Source Window (code previously in srcmenubar.itcl and
	srctoolbar.itcl).
	* library/srcmenubar.itcl: Remove obsolete file.
	* library/srctoolbar.itcl: Remove obsolete file.
	* library/srcbar.tcl: Remove obsolete file.
	* library/gdbmenubar.itcl (menubar_show): New method. Associate the
	menu with the toplevel window.
        * library/srcwin.itb (_build_win): Use SrcBar.
	* library/tclIndex: Regenerate.

2001-01-24  Fernando Nasser  <fnasser@redhat.com>

	From  Martin Hunt  <hunt@cygnus.com>
	* generic/gdbtk-cmds.c (gdb_set_bp_addr, gdb_set_bp): Change
	strsave() to xstrdup().

2001-01-24  Fernando Nasser  <fnasser@redhat.com>

	From  Martin Hunt  <hunt@cygnus.com>
	* generic/gdbtk-cmds.c (gdbtk_dis_asm_read_memory): Fix call
	to xfer_memory().

2001-01-19  Fernando Nasser  <fnasser@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Set default value of
	gdb/src/top_control to place the source window controls at the top.

2001-01-18  Fernando Nasser  <fnasser@redhat.com>

        * library/srctextwin.itb (_highlightAsmLine): Add missing FUNCNAME
	parameter.
        (FillAssembly, FillMixed): Pass the FUNCNAME parameter that is
        needed by the above method.
        * library/srctextwin.ith (_highlightAsmLine): Add FUNCNAME parameter
	to method definition.

2001-01-17  Fernando Nasser  <fnasser@redhat.com>

        * library/srctextwin.itb (_highlightAsmLine): Add missing FILENAME
	parameter.
        (FillAssembly, FillMixed): Pass the FILENAME parameter that is
        needed by the above method.
        * library/srctextwin.ith (_highlightAsmLine): Add FILENAME parameter
	to method definition.

2001-01-15  Fernando Nasser  <fnasser@redhat.com>

	* srcwin.itb (clear_file): Pass the appropriate value to the GO 
	argument of mode() so it does not try to read a source file when
	no executable is loaded.

2001-01-09  Fernando Nasser  <fnasser@redhat.com>

	* library/srcmenubar.itcl (create_file_menu): Add missing incr for
	session numbers.

2001-01-04  Fernando Nasser  <fnasser@redhat.com>

	The following changes fix the problem of having to click on a splash
	window to make it disapear.
	* modal.tcl (post): Take as an argument "expire", the time a modal
	window is displayed.
	* managedwin.itb (open): Check for an "expire" argument and pass the
	value down to modal post method.

2001-01-04  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl (set_class_state): New public method.
	Standard method to control state by class.
	(menubar_menu_class_find): Delete public accessor method.
	(menubar_change_menu_state): Change the state of a menu item
	not of a whole class list.
	* library/srcmenubar.itcl (enable_ui): Use set_class_state instead
	of prying into base class internal data.
        * library/gdbtoolbar.itcl (set_class_state): New public method.
        Standard method to control state by class.
        (toolbar_button_class_find): Delete public accessor method.
	* library/srctoolbar.itcl (enable_ui): Use set_class_state instead
	of prying into base class internal data.

2001-01-04  Fernando Nasser  <fnasser@redhat.com>

	* library/interface.tcl (gdbtk_connect): New proc. Connects to ai
	 remote target (code previously at library/gdbmenubar.itcl).
	(disconnect): Rename to...
	(gdbtk_disconnect): New name for proc disconnect.
	* library/srcmenubar.itcl (do_connect): Remove the code mentioned
	above and call the new interface proc gdbtk_connect.
	Also, call ::update idletasks after changing the state of the
	menu entries.
	(do_detach): Call gdbtk_disconnect, not ::disconnect (old name).
	(do_disconnect): Call gdbtk_disconnect, not disconnect (old name).

2001-01-03  Fernando Nasser  <fnasser@redhat.com>

	* library/prefs.tcl (pref_set_defaults): Define gdb/src/top_control
	to allow the source window controls to be placed at the top.
	* library/srcwin.itb (_build_win): Test for gdb/src/top_control
	and place the controls accordingly.

2001-01-02  Fernando Nasser  <fnasser@redhat.com>

	* library/gdbmenubar.itcl: New file. Define the GDBMenuBar class,
	a generic menubar building facility for Insight windows (WIP).
	* library/gdbtoolbar.itcl: New file. Define the GDBToolBar class,
	a generic toolbar building facility for Insight windows (WIP).
	* library/srcmenubar.itcl: New file. Define the SrcMenuBar class,
	which implements the Source Window menubar (inherits GDBMenuBar).
	* library/srctoolbar.itcl: New file. Define the SrcToolBar class,
	which implements the Source Window toolbar (inherits GDBToolBar).
	* library/srcwin.itb (_build_win): Use SrcMenuBar and SrcToolBar
	instead of the obsolete GDBSrcBar.
	* library/srcbar.tcl: Mark as OBSOLETE.
	* library/toolbar.tcl: Mark as OBSOLETE. Rename class GDBToolBar
	to avoid conflict with new class with the same name.
	* library/Makefile (TCL): Include .itcl files.
	* library/tclIndex: Regenerate.

2001-01-02  Fernando Nasser  <fnasser@redhat.com>

	* library/srcwin.itb (_build_win): If gdb is running a program, load
	the window with source for that location (if available).
	(download_progress): Calls to "update" must refer to the global
	namespace.

2001-01-02  Fernando Nasser  <fnasser@redhat.com>

	* library/interface.tcl (gdbtk_quit_check): Save session whenever
	possible.

2001-01-01  Fernando Nasser  <fnasser@redhat.com>

	* library/ChangeLog-2000: New file. Entries dated 2000 moved here
        from library/ChangeLog.
        * library/ChangeLog: Removed. 
        * generic/ChangeLog-2000: New file. Entries dated 2000 moved here
        from library/ChangeLog.
        * generic/ChangeLog: Removed.

2000-12-14  Fernando Nasser  <fnasser@redhat.com>

	* library/ChangeLog-1999: New file. Entries dated 1999 moved here
	from library/ChangeLog.
	* library/ChangeLog-1998: New file.  Similar change for 1998.
	* library/ChangeLog-1997: New file.  Similar change for 1997.
	* library/ChangeLog: Removed entries previous to 2000.
	* generic/ChangeLog-1999: New file. Entries dated 1999 moved here
	from library/ChangeLog.
	* generic/ChangeLog-1998: New file.  Similar change for 1998.
	* generic/ChangeLog-1997: New file.  Similar change for 1997.
	* generic/ChangeLog: Removed entries previous to 2000.

2000-04-17  Jonathan Larmour  <jlarmour@redhat.co.uk>

	* ChangeLog-gdbtk: Renamed to ChangeLog
	* ChangeLog: New file
	* README.GDBTK: No need for changelog-default-name hint for Emacs now

Sat Feb  5 00:14:30 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* gdb.rc, gdbtool.ico, README.GDBTK: To here from top level GDB
 	directory.
	* gdb/gdbtcl2: Directory moved to gdbtk/library.
	* gdb/gdbtk/generic: New directory.
	
